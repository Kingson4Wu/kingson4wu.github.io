---
title: 20251223-Python ä¾èµ–ä¸ç¯å¢ƒç®¡ç†å®Œå…¨æŒ‡å—
date: 2025-12-23 12:47:04
tags: [Python, ä¾èµ–ç®¡ç†, ç¯å¢ƒç®¡ç†]
---

## é€‚ç”¨è¯»è€…

æœ¬æŒ‡å—é€‚åˆï¼š
- ä»å…¶ä»–è¯­è¨€è½¬å‘ Python çš„å¼€å‘è€…
- å¯¹ Python ä¾èµ–ç®¡ç†å›°æƒ‘çš„åˆä¸­çº§å¼€å‘è€…
- éœ€è¦åœ¨å›¢é˜Ÿä¸­ç»Ÿä¸€å·¥å…·é“¾çš„æŠ€æœ¯è´Ÿè´£äºº
- å¸Œæœ›äº†è§£ç°ä»£ Python å·¥å…·ç”Ÿæ€çš„ä»ä¸šè€…

---

## ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ

### 1.1 Python åŒ…ç®¡ç†çš„æœ¬è´¨ç‰¹ç‚¹

Python ä¸å…¶ä»–è¯­è¨€ï¼ˆJava/Goï¼‰çš„æ ¹æœ¬å·®å¼‚ï¼š

- **è¿è¡Œæ—¶åŠ è½½**ï¼šPython åœ¨æ‰§è¡Œ `import` æ—¶æ‰åŠ è½½æ¨¡å—ï¼Œæ— ç¼–è¯‘æœŸæ£€æŸ¥
- **è·¯å¾„ä¾èµ–**ï¼šç›´æ¥ä» `sys.path` åŠ è½½åº“ï¼Œä¸åƒ Java æ¯ä¸ªç¨‹åºç‹¬ç«‹åŠ è½½ jar
- **å†²çªæ˜“å‘**ï¼šä¸åŒé¡¹ç›®ä¾èµ–åŒä¸€åº“çš„ä¸åŒç‰ˆæœ¬å®¹æ˜“å†²çª
- **éš”ç¦»å¿…è¦**ï¼šç¯å¢ƒéš”ç¦»æ˜¯è§£å†³ä¾èµ–å†²çªçš„æ ¸å¿ƒæ‰‹æ®µ

### 1.2 çœŸæ­£çš„éš”ç¦»æ˜¯ä»€ä¹ˆ

**ä½ è¦éš”ç¦»çš„æœ¬è´¨æ˜¯ `sys.path`**

- **venv / Poetry / uv**ï¼šè·¯å¾„éš”ç¦»ï¼ˆé€»è¾‘éš”ç¦» + æ–‡ä»¶å†—ä½™ï¼‰
- **conda**ï¼šè·¯å¾„éš”ç¦» + åŒ…å…±äº«ï¼ˆç¡¬é“¾æ¥ï¼‰
- **Docker**ï¼šè¿›ç¨‹çº§éš”ç¦»ï¼ˆç›´æ¥è·³è¿‡ Python å±‚é¢é—®é¢˜ï¼‰

---

## äºŒã€ç¯å¢ƒç®¡ç†å·¥å…·å¯¹æ¯”

### 2.1 å·¥å…·åˆ†ç±»ä¸ç‰¹ç‚¹

| å·¥å…· | åˆ†ç±» | æ ¸å¿ƒåŠŸèƒ½ | åŒ…å…±äº« | é€‚ç”¨åœºæ™¯ |
|------|------|----------|--------|----------|
| `venv` | æ ‡å‡†åº“ | è½»é‡è™šæ‹Ÿç¯å¢ƒ | âŒ | ç®€å•é¡¹ç›® |
| `virtualenv` | ç¬¬ä¸‰æ–¹ | venv å¢å¼ºç‰ˆ | âŒ | å…¼å®¹æ—§ç‰ˆ Python |
| `pyenv` | ç¬¬ä¸‰æ–¹ | Python ç‰ˆæœ¬ç®¡ç† | âŒ | å¤šç‰ˆæœ¬ Python å…±å­˜ |
| `Poetry` | ç¬¬ä¸‰æ–¹ | ä¾èµ–+ç¯å¢ƒ+æ„å»º+å‘å¸ƒ | âŒ | ç°ä»£é¡¹ç›®å…¨æµç¨‹ |
| `uv` | ç¬¬ä¸‰æ–¹ | è¶…é«˜é€Ÿå·¥å…·é“¾ | âŒ | è¿½æ±‚æè‡´æ€§èƒ½ |
| `conda` | ç¬¬ä¸‰æ–¹ | è·¨è¯­è¨€åŒ…+ç¯å¢ƒç®¡ç† | âœ… | ç§‘å­¦è®¡ç®—/å¤§ä¾èµ– |

### 2.2 åŒ…å…±äº«æœºåˆ¶æ·±åº¦è§£æ

**ä»€ä¹ˆæ˜¯çœŸæ­£çš„"åŒ…å…±äº«"ï¼Ÿ**

æŒ‡åŒä¸€ç‰ˆæœ¬çš„åŒ…åœ¨ç£ç›˜ä¸Šåªå­˜ä¸€ä»½å®ä½“æ–‡ä»¶ï¼Œé€šè¿‡ç¡¬é“¾æ¥å¼•ç”¨ï¼Œè€Œéï¼š
- ç½‘ç»œä¸‹è½½ç¼“å­˜ï¼ˆ`pip cache`ï¼‰
- Wheel ç¼“å­˜
- æºç ç¼“å­˜

**å„å·¥å…·çš„åŒ…å…±äº«æƒ…å†µï¼š**

#### âŒ venv / virtualenv / Poetry / uv

**åŸç†**ï¼šæ¯ä¸ªè™šæ‹Ÿç¯å¢ƒæœ‰ç‹¬ç«‹çš„ `site-packages`ï¼ŒåŒ…å®Œæ•´å¤åˆ¶

```
envA/site-packages/numpy/  â† å®Œæ•´å‰¯æœ¬
envB/site-packages/numpy/  â† å®Œæ•´å‰¯æœ¬
```

**è®¾è®¡å“²å­¦**ï¼š"ä¸€ä¸ªç¯å¢ƒ = ä¸€å¥—å®Œå…¨è‡ªæ´½çš„ Python è¿è¡Œæ—¶"

- âœ… ç®€å•ã€å¯é¢„æµ‹ã€è¡Œä¸ºä¸€è‡´
- âŒ ç£ç›˜å†—ä½™

#### âœ… condaï¼ˆå”¯ä¸€çœŸæ­£å…±äº«ï¼‰

**åŸç†**ï¼šå…¨å±€åŒ…ç¼“å­˜ + ç¯å¢ƒç¡¬é“¾æ¥å¼•ç”¨

```
conda/pkgs/numpy-1.26.4/  â† å”¯ä¸€å®ä½“
   â†‘ ç¡¬é“¾æ¥      â†‘ ç¡¬é“¾æ¥
 envA/        envB/
```

**æŠ€æœ¯å®ç°**ï¼šconda ä½¿ç”¨ç¡¬é“¾æ¥ï¼ˆhard linksï¼‰æŠ€æœ¯ï¼ŒåŒä¸€ç‰ˆæœ¬çš„åŒ…åœ¨ç£ç›˜ä¸Šåªå­˜å‚¨ä¸€ä»½ï¼Œä¸åŒç¯å¢ƒé€šè¿‡ç¡¬é“¾æ¥å¼•ç”¨åŒä¸€ä»½æ–‡ä»¶ã€‚

**è®¾è®¡å“²å­¦**ï¼š"åŒ…æ˜¯èµ„æºï¼Œç¯å¢ƒåªæ˜¯è§†å›¾"

- âœ… èŠ‚çœç£ç›˜ã€å¤§åº“å‹å¥½ã€C/C++ ä¾èµ–å¤ç”¨
- âŒ æœºåˆ¶å¤æ‚ã€è°ƒè¯•æˆæœ¬é«˜ã€ä¸ pip ç”Ÿæ€æœ‰æ‘©æ“¦

---

## ä¸‰ã€ä¾èµ–ç®¡ç†å·¥å…·å¯¹æ¯”

### 3.1 ä¾èµ–å£°æ˜æ–‡ä»¶

| æ–‡ä»¶ | å·¥å…· | ç‰¹ç‚¹ |
|------|------|------|
| `requirements.txt` | pip | æœ€åŸºç¡€ï¼Œæ‰‹åŠ¨ç»´æŠ¤ç‰ˆæœ¬ |
| `requirements.in` + `.txt` | pip-tools | åˆ†ç¦»æŠ½è±¡/é”å®šä¾èµ– |
| `setup.py` / `setup.cfg` | setuptools | åº“å¼€å‘ä¾èµ–å£°æ˜ |
| `Pipfile` + `Pipfile.lock` | pipenv | åŒºåˆ†ç”Ÿäº§/å¼€å‘ä¾èµ– |
| `pyproject.toml` + `poetry.lock` | Poetry | ç°ä»£æ ‡å‡†ï¼Œç»Ÿä¸€ç®¡ç† |
| `pyproject.toml` + `uv.lock` | uv | PEP æ ‡å‡†å…¼å®¹ |
| `environment.yml` | conda | è·¨è¯­è¨€ä¾èµ– |

### 3.2 ä¾èµ–ç®¡ç†å·¥å…·æ·±åº¦å¯¹æ¯”

| ç‰¹æ€§ | pip | Poetry | uv | conda |
|------|-----|--------|----|----|
| **å®šä½** | åŸºç¡€å®‰è£…å™¨ | é¡¹ç›®å…¨ç”Ÿå‘½å‘¨æœŸ | è¶…å¿«å·¥å…·é“¾ | è·¨è¯­è¨€åŒ…ç®¡ç† |
| **é€Ÿåº¦** | æ…¢ | æ…¢ | ğŸš€ æå¿«ï¼ˆ10-100å€ï¼‰ | ä¸­ç­‰ |
| **é”å®šç‰ˆæœ¬** | éœ€ pip-tools | âœ… poetry.lock | âœ… uv.lock | âœ… conda-lock |
| **ç¯å¢ƒç®¡ç†** | éœ€é…åˆ venv | âœ… è‡ªåŠ¨åˆ›å»º | âœ… è‡ªåŠ¨åˆ›å»º | âœ… åŸç”Ÿæ”¯æŒ |
| **ä¾èµ–è§£æ** | åŸºç¡€ | å®Œæ•´ä½†æ…¢ | æå¿«ä¸”ç°ä»£ | å®Œæ•´ |
| **Python ç‰ˆæœ¬ç®¡ç†** | âŒ | âŒ | âœ… å†…ç½® | âœ… åŸç”Ÿ |
| **æ„å»ºå‘å¸ƒ** | éœ€å…¶ä»–å·¥å…· | âœ… å®Œæ•´ | âš ï¸ æ„å»ºæœ‰é™ | æ”¯æŒ |
| **äºŒè¿›åˆ¶ä¾èµ–** | å¼± | å¼± | å¼± | å¼º |
| **ç”Ÿæ€æˆç†Ÿåº¦** | æœ€æˆç†Ÿ | æˆç†Ÿï¼ˆ2018-ï¼‰ | è¾ƒæ–°ï¼ˆ2023-ï¼‰ | æˆç†Ÿ |
| **å®ç°è¯­è¨€** | Python | Python | Rust | C++/Python |

### 3.3 Poetry vs uv æ ¸å¿ƒå·®å¼‚

**ä¸€å¥è¯å®šä½ï¼š**
- **Poetry**ï¼šå®Œæ•´çš„é¡¹ç›®/åŒ…ç®¡ç†å·¥å…·ï¼ˆç±»ä¼¼ npm/yarnï¼‰
- **uv**ï¼šè¶…é«˜é€Ÿ Python å·¥å…·é“¾ï¼ˆç±»ä¼¼ pnpm + bunï¼‰

**æœ¬è´¨å·®å¼‚ï¼š**

| èƒ½åŠ› | Poetry | uv |
|------|--------|-----|
| ä¾èµ–ç®¡ç† | âœ… å®Œæ•´ | âœ… å®Œæ•´ï¼ˆpip å…¼å®¹ï¼‰ |
| é”æ–‡ä»¶ | poetry.lock | uv.lockï¼ˆå¯é€‰ï¼‰ |
| è™šæ‹Ÿç¯å¢ƒ | å†…ç½® | å†…ç½®ï¼Œå¿« N å€ |
| å®‰è£…é€Ÿåº¦ | è¾ƒæ…¢ | ğŸš€ æå¿«ï¼ˆRustï¼‰ |
| æ‰§è¡Œè„šæœ¬ | âŒ | `uv run`ã€`uv tool` |
| Python ç‰ˆæœ¬ç®¡ç† | âŒ | âœ… å†…ç½®è‡ªåŠ¨ä¸‹è½½ |
| æ„å»ºå‘å¸ƒ | âœ… å®Œæ•´ | âš ï¸ å‘å¸ƒåŠŸèƒ½å¾…å®Œå–„ |
| å·¥å…·èŒƒå›´ | é¡¹ç›®ä¸“æ³¨ | å…¨æ ˆå·¥å…·é“¾ |
| ç¤¾åŒºç”Ÿæ€ | æˆç†Ÿä¸°å¯Œ | å¿«é€Ÿæˆé•¿ä¸­ |

**é€‰æ‹©å»ºè®®ï¼š**

- **é€‰ Poetry**ï¼š
  - åº“/SDK å¼€å‘ï¼Œéœ€è¦æˆç†Ÿå‘å¸ƒæµç¨‹
  - å·²æœ‰ Poetry é¡¹ç›®ï¼Œå›¢é˜Ÿç†Ÿæ‚‰
  - éœ€è¦ä¸°å¯Œçš„æ’ä»¶å’Œç¤¾åŒºæ”¯æŒ
  - ç¨³å®šæ€§ä¼˜å…ˆçš„ä¼ä¸šé¡¹ç›®

- **é€‰ uv**ï¼š
  - è¿½æ±‚æè‡´æ€§èƒ½çš„æ–°é¡¹ç›®
  - AI/åç«¯æœåŠ¡å¼€å‘
  - æƒ³è¦ç»Ÿä¸€å·¥å…·é“¾ï¼ˆç‰ˆæœ¬ç®¡ç†+ä¾èµ–+è¿è¡Œï¼‰
  - æ„¿æ„è·Ÿè¿›æ–°å·¥å…·çš„è¿­ä»£

**æˆç†Ÿåº¦æé†’**ï¼š
> uv æ˜¯è¾ƒæ–°çš„å·¥å…·ï¼ˆ2023å¹´å‘å¸ƒï¼‰ï¼Œè™½ç„¶æ€§èƒ½å“è¶Šï¼Œä½†ç”Ÿæ€æˆç†Ÿåº¦å’Œç¤¾åŒºèµ„æºä¸å¦‚ Poetryã€‚å»ºè®®åœ¨æ–°é¡¹ç›®ä¸­å°è¯•ï¼Œæˆç†Ÿé¡¹ç›®è°¨æ…è¿ç§»ã€‚ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰å»ºè®®å……åˆ†æµ‹è¯•ã€‚

**é«˜çº§ç”¨æ³•**ï¼ˆé€‚åˆæœ‰ç»éªŒçš„å¼€å‘è€…ï¼‰ï¼š
å¯ä»¥ç”¨ uv åŠ é€Ÿæ—¥å¸¸å¼€å‘ï¼ˆ`uv sync`ã€`uv run`ï¼‰ï¼ŒåŒæ—¶ä¿ç•™ Poetry é…ç½®ç”¨äºæ„å»ºå‘å¸ƒã€‚ä½†åˆå­¦è€…å»ºè®®é€‰æ‹©å…¶ä¸€ï¼Œé¿å…å·¥å…·é“¾è¿‡äºå¤æ‚ã€‚

```bash
# æ—¥å¸¸å¼€å‘ï¼ˆå¿«ï¼‰
uv sync
uv run python app.py

# æ„å»ºå‘å¸ƒï¼ˆæˆç†Ÿï¼‰
poetry build
poetry publish
```

---

## å››ã€ä¾èµ–ç®¡ç†å…¨æµç¨‹

### 4.1 ä¾èµ–ç®¡ç†çš„ä¸‰ä¸ªå±‚æ¬¡

#### 1ï¸âƒ£ ä»…å®‰è£…ä¾èµ–ï¼ˆåŸºç¡€ï¼‰
```bash
pip install package
pip install -r requirements.txt
```
- âœ… ç®€å•
- âŒ æ˜“ç‰ˆæœ¬å†²çªã€ä¸å¯å¤ç°

#### 2ï¸âƒ£ é”å®šä¾èµ–ï¼ˆæ ‡å‡†ï¼‰
```bash
# pip-tools
pip-compile requirements.in

# Poetry
poetry lock

# uv
uv lock
```
- âœ… ä¿è¯ç‰ˆæœ¬ä¸€è‡´
- âœ… ä¸åŒæœºå™¨å¯å¤ç°

#### 3ï¸âƒ£ ç¯å¢ƒ+ä¾èµ–ä¸€ä½“åŒ–ï¼ˆç°ä»£ï¼‰
```bash
# Poetry
poetry install

# uv
uv sync

# conda
conda env create -f environment.yml
```
- âœ… éš”ç¦»æ€§å¥½
- âœ… ä¾èµ–å¯å¤ç°
- âš ï¸ å·¥å…·å­¦ä¹ æˆæœ¬

### 4.2 å®Œæ•´æµç¨‹ç¤ºæ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¯å¢ƒç®¡ç†ï¼ˆéš”ç¦»ï¼‰ â”‚
â”‚ venv / conda    â”‚
â”‚ Poetry / uv     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å£°æ˜ä¾èµ–        â”‚
â”‚ pyproject.toml  â”‚
â”‚ requirements.in â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿæˆé”æ–‡ä»¶      â”‚
â”‚ poetry lock     â”‚
â”‚ uv lock         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®‰è£…ä¾èµ–        â”‚
â”‚ poetry install  â”‚
â”‚ uv sync         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‡çº§/ç»´æŠ¤       â”‚
â”‚ poetry update   â”‚
â”‚ uv upgrade      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äº”ã€å®æˆ˜åœºæ™¯é€‰æ‹©æ–¹æ¡ˆ

### 5.1 æœ¬åœ°å¼€å‘

**æ¨èï¼šPoetry æˆ– uv**

```bash
# Poetryï¼ˆæˆç†Ÿç¨³å®šï¼‰
poetry config virtualenvs.in-project true  # è™šæ‹Ÿç¯å¢ƒæ”¾é¡¹ç›®å†…
poetry add requests
poetry install

# uvï¼ˆæè‡´æ€§èƒ½ï¼‰
uv init
uv add requests
uv sync
```

**Poetry è™šæ‹Ÿç¯å¢ƒç®¡ç†ï¼š**

```bash
# æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒ
poetry env list

# åˆ é™¤æŒ‡å®šç¯å¢ƒ
poetry env remove python3.11

# é…ç½®ç¯å¢ƒåœ¨é¡¹ç›®å†…ï¼ˆæ¨èï¼‰
poetry config virtualenvs.in-project true
```

### 5.2 ç§‘å­¦è®¡ç®—/å¤§ä¾èµ–

**æ¨èï¼šconda**

```bash
conda create -n myenv python=3.11 numpy pandas
conda activate myenv
```

**ä¹Ÿå¯ç»“åˆ Poetryï¼š**

```bash
# åˆ›å»º conda ç¯å¢ƒ
conda create -n myenv python=3.11

# Poetry ä½¿ç”¨è¿™ä¸ªç¯å¢ƒ
poetry env use /path/to/conda/env/bin/python
poetry install
```

| å¯¹æ¯”é¡¹ | venv/Poetry | conda/Poetry |
|-------|-------------|--------------|
| ç£ç›˜å ç”¨ | é«˜ï¼ˆæ¯ä¸ªç¯å¢ƒå®Œæ•´å‰¯æœ¬ï¼‰ | ä½ï¼ˆç¡¬é“¾æ¥å…±äº«ï¼‰ |
| äºŒè¿›åˆ¶ä¾èµ– | å¼±ï¼ˆéœ€ç³»ç»Ÿç¼–è¯‘ï¼‰ | å¼ºï¼ˆé¢„ç¼–è¯‘åŒ…ï¼‰ |
| é€‚ç”¨åœºæ™¯ | Web/è½»é‡é¡¹ç›® | æ•°æ®ç§‘å­¦/å¤šé¡¹ç›® |

### 5.3 ç”Ÿäº§ç¯å¢ƒï¼ˆDockerï¼‰

**æ ¸å¿ƒåŸåˆ™ï¼šDocker å·²æä¾›ç¯å¢ƒéš”ç¦»ï¼Œä¾èµ–ç®¡ç†åªéœ€é”å®šç‰ˆæœ¬**

#### æ–¹æ¡ˆ Aï¼šrequirements.txt + pipï¼ˆæœ€ç®€å•ã€æœ€ç¨³å®šï¼‰

```dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["python", "app.py"]
```

#### æ–¹æ¡ˆ Bï¼šPoetry å¯¼å‡ºï¼ˆå¼€å‘+ç”Ÿäº§ç»“åˆï¼‰

```bash
# æœ¬åœ°å¼€å‘ç”¨ Poetry
poetry add requests

# å¯¼å‡ºç»™ Docker
poetry export -f requirements.txt -o requirements.txt --without-hashes
```

```dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["python", "app.py"]
```

#### æ–¹æ¡ˆ Cï¼šuv åŠ é€Ÿï¼ˆæè‡´æ€§èƒ½ï¼‰

```dockerfile
FROM python:3.11-slim
COPY --from=ghcr.io/astral-sh/uv:latest /uv /bin/uv
WORKDIR /app
COPY pyproject.toml uv.lock ./
RUN uv sync --frozen --no-dev
COPY . .
CMD ["python", "app.py"]
```

**æ³¨æ„**ï¼šç”Ÿäº§ç¯å¢ƒç›´æ¥è°ƒç”¨ `python`ï¼Œä¸ä½¿ç”¨ `uv run` åŒ…è£…ï¼Œä»¥å‡å°‘è¿è¡Œæ—¶å¼€é”€ã€‚

**ç”Ÿäº§ç¯å¢ƒæ€»ç»“ï¼š**
- Docker è´Ÿè´£ç¯å¢ƒéš”ç¦»
- Python å·¥å…·åªè´Ÿè´£"è£…å¯¹åŒ…"
- requirements.txt + pip æœ€ç¨³å®šé€šç”¨
- Poetry/uv å¯ç”¨äºå¼€å‘ï¼ŒDocker æ„å»ºæ—¶å¯¼å‡º

### 5.4 uv çš„ä¾èµ–å¯¼å‡ºæœºåˆ¶

```bash
# å¯¼å‡ºç”Ÿäº§ä¾èµ–
uv export --format requirements-txt > requirements.txt

# å¯¼å‡ºå¼€å‘ä¾èµ–
uv export --dev --format requirements-txt > dev-requirements.txt
```

**å·¥ä½œåŸç†ï¼š**
```
pyproject.tomlï¼ˆå£°æ˜ä¾èµ–ï¼‰
        â†“
    uv.lockï¼ˆé”å®šç‰ˆæœ¬ï¼‰
        â†“
requirements.txtï¼ˆå¯¼å‡ºäº§ç‰©ï¼Œç»™ pip ç”¨ï¼‰
```

---

## å…­ã€ä¾èµ–å®Œæ•´æ€§ä¿éšœ

### 6.1 Python çš„æ ¹æœ¬é™åˆ¶

**æ ¸å¿ƒé—®é¢˜ï¼šPython æ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œæ— ç¼–è¯‘æœŸæ£€æŸ¥**

- Rust/Go/Javaï¼šç¼–è¯‘é˜¶æ®µæ£€æŸ¥ä¾èµ–ï¼Œç¼ºå¤±ç›´æ¥æŠ¥é”™
- Pythonï¼š`import` åœ¨è¿è¡Œæ—¶è§¦å‘ï¼Œåªèƒ½ `ModuleNotFoundError`

**ç»“è®ºï¼šæ— æ³•åƒç¼–è¯‘å‹è¯­è¨€é‚£æ · 100% ä¿è¯ä¾èµ–å®Œæ•´**

### 6.2 æœ€ä½³å®è·µï¼ˆå°½é‡æ¥è¿‘ç¼–è¯‘æœŸæ£€æŸ¥ï¼‰

#### 1ï¸âƒ£ ä¾èµ–å£°æ˜ + é”æ–‡ä»¶ï¼ˆåŸºç¡€ï¼‰
```bash
# Poetry
poetry add requests
poetry lock

# uv
uv add requests
uv lock
```

#### 2ï¸âƒ£ é™æ€æ‰«æ importï¼ˆè¿›é˜¶ï¼‰

**å·¥å…·ï¼š**
- `dephell deps check`
- è‡ªå®šä¹‰è„šæœ¬ï¼ˆç”¨ `ast` æ¨¡å—è§£æ importï¼‰

**CI æµç¨‹ï¼š**
```bash
# æ‰«æä»£ç  import
python scan_imports.py

# å¯¹æ¯” pyproject.toml
# å‘ç°æœªå£°æ˜ä¾èµ– â†’ é˜»æ­¢æäº¤
```

#### 3ï¸âƒ£ å…¨è¦†ç›–æµ‹è¯•ï¼ˆæ ¸å¿ƒï¼‰
```bash
# CI é‡Œæ‰§è¡Œ
poetry install
pytest --cov=src tests/

# ä»»ä½•ç¼ºå¤±ä¾èµ–åœ¨æµ‹è¯•ä¸­æš´éœ²
```

#### 4ï¸âƒ£ ç»¼åˆæ–¹æ¡ˆï¼ˆæœ€å¼ºï¼‰

```
æäº¤ä»£ç 
   â†“
é™æ€æ‰«æ import vs pyproject.toml
   â†“ï¼ˆå‘ç°æœªå£°æ˜ â†’ æ‹’ç»ï¼‰
å…¨é‡å•å…ƒæµ‹è¯•
   â†“ï¼ˆimport æŠ¥é”™ â†’ æ‹’ç»ï¼‰
CI é€šè¿‡
   â†“
åˆå¹¶ä»£ç 
```

**é™åˆ¶ï¼š**
- åŠ¨æ€ import æ— æ³•å®Œå…¨æ•è·
- æ¡ä»¶ import å¯èƒ½é—æ¼
- é—´æ¥ä¾èµ–å¯èƒ½è¯¯åˆ¤

---

## ä¸ƒã€å¸¸è§é—®é¢˜

### 7.1 `(venv) (base)` åŒæ—¶å‡ºç°

**åŸå› ï¼š**
- `(base)`ï¼šconda é»˜è®¤ç¯å¢ƒè‡ªåŠ¨æ¿€æ´»
- `(venv)`ï¼šæ‰‹åŠ¨æ¿€æ´»çš„ Python è™šæ‹Ÿç¯å¢ƒ

**å®é™…æ•ˆæœï¼š**
- Python è§£é‡Šå™¨ä½¿ç”¨ `venv` çš„
- conda base çš„ PATH ä»åœ¨ï¼Œä½†è¢« venv è¦†ç›–

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# æ–¹æ¡ˆ Aï¼šå…³é—­ conda è‡ªåŠ¨æ¿€æ´»
conda config --set auto_activate_base false

# æ–¹æ¡ˆ Bï¼šåªç”¨ conda ç¯å¢ƒ
conda create -n myenv python=3.11
conda activate myenv

# æ–¹æ¡ˆ Cï¼šä¸ç®¡å®ƒï¼ˆä¸å½±å“ä½¿ç”¨ï¼‰
```

### 7.2 æœªä½¿ç”¨ä¾èµ–çš„æ¸…ç†

**Poetry æœ¬èº«ä¸è‡ªåŠ¨è¯†åˆ«ï¼Œéœ€å€ŸåŠ©å·¥å…·ï¼š**

```bash
# ä½¿ç”¨ poetry-detect-unused
pip install poetry-detect-unused
poetry unused

# æ‰‹åŠ¨ç§»é™¤
poetry remove <package>
poetry lock
```

**æœ€ä½³å®è·µï¼š**
1. å®šæœŸç”¨ `poetry show --tree` æ£€æŸ¥ä¾èµ–æ ‘
2. ç”¨ `poetry-detect-unused` æ‰«æ
3. æ‰‹åŠ¨ç¡®è®¤å `poetry remove`
4. `poetry lock` æ›´æ–°é”æ–‡ä»¶

### 7.3 Poetry è™šæ‹Ÿç¯å¢ƒæ®‹ç•™

**é—®é¢˜ï¼š**
- é»˜è®¤è™šæ‹Ÿç¯å¢ƒåœ¨ç³»ç»Ÿç›®å½•ï¼Œåˆ é¡¹ç›®åä»å ç©ºé—´

**è§£å†³ï¼š**

```bash
# æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒ
poetry env list

# åˆ é™¤ç‰¹å®šç¯å¢ƒ
poetry env remove <env-name>

# æ¨èé…ç½®ï¼šç¯å¢ƒæ”¾é¡¹ç›®å†…
poetry config virtualenvs.in-project true
```

### 7.4 Windows ç³»ç»Ÿæ³¨æ„äº‹é¡¹

**å¸¸è§é—®é¢˜ï¼š**
- è·¯å¾„åˆ†éš”ç¬¦å·®å¼‚ï¼ˆ`\` vs `/`ï¼‰
- æŸäº›åŒ…çš„äºŒè¿›åˆ¶ä¾èµ–åœ¨ Windows ç¼–è¯‘å›°éš¾
- è™šæ‹Ÿç¯å¢ƒæ¿€æ´»è„šæœ¬ä½ç½®ä¸åŒ

**å»ºè®®ï¼š**
- ä½¿ç”¨ conda å¤„ç†å¤æ‚äºŒè¿›åˆ¶ä¾èµ–
- ä¼˜å…ˆé€‰æ‹©æä¾›é¢„ç¼–è¯‘ wheel çš„åŒ…
- åœ¨ Windows ä¸Šï¼Œ`pip install` æ—¶ä¼˜å…ˆå®‰è£… wheel è€Œéä»æºç ç¼–è¯‘

---

## å…«ã€æ€»ç»“ä¸é€‰æ‹©æŒ‡å—

### 8.1 æ ¸å¿ƒåŸåˆ™

- **ç¯å¢ƒç®¡ç†** â†’ è§£å†³"éš”ç¦»å’Œ Python ç‰ˆæœ¬"
- **ä¾èµ–ç®¡ç†** â†’ è§£å†³"é¡¹ç›®éœ€è¦å“ªäº›åŒ…åŠç‰ˆæœ¬é”å®š"
- **ç”Ÿäº§éƒ¨ç½²** â†’ Docker æä¾›ç»ˆæéš”ç¦»

### 8.2 æŠ€æœ¯é€‰å‹å†³ç­–æ ‘

```
é¡¹ç›®ç±»å‹ï¼Ÿ
â”œâ”€ Web/åç«¯æœåŠ¡
â”‚  â”œâ”€ è¿½æ±‚æ€§èƒ½ + æ–°é¡¹ç›® â†’ uv
â”‚  â””â”€ æˆç†Ÿç¨³å®š + ä¼ä¸šé¡¹ç›® â†’ Poetry
â”‚
â”œâ”€ åº“/SDK å¼€å‘
â”‚  â””â”€ Poetryï¼ˆå®Œæ•´å‘å¸ƒæµç¨‹ï¼‰
â”‚
â”œâ”€ æ•°æ®ç§‘å­¦/ML
â”‚  â”œâ”€ å¤§ä¾èµ–/äºŒè¿›åˆ¶åŒ… â†’ conda
â”‚  â””â”€ è½»é‡çº§/çº¯ Python â†’ uv/Poetry
â”‚
â””â”€ ç”Ÿäº§éƒ¨ç½²
   â””â”€ Docker + requirements.txtï¼ˆæœ€ç¨³å®šï¼‰
```

### 8.3 ç°ä»£é¡¹ç›®æœ€ä½³å®è·µ

**æœ¬åœ°å¼€å‘ï¼š**
```bash
uv init                    # æå¿«ç¯å¢ƒåˆ›å»º
uv add requests numpy      # ä¾èµ–ç®¡ç†
uv run python app.py       # æ—¥å¸¸å¼€å‘
```

**å›¢é˜Ÿåä½œï¼š**
```bash
poetry add requests        # ç»Ÿä¸€ä¾èµ–ç®¡ç†
poetry lock               # é”å®šç‰ˆæœ¬
poetry export -o requirements.txt  # å¯¼å‡ºç»™ CI/Docker
```

**ç”Ÿäº§éƒ¨ç½²ï¼š**
```dockerfile
FROM python:3.11-slim
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["python", "app.py"]
```

### 8.4 ç»ˆæçœŸç›¸

**å…³äºä¾èµ–å…±äº«ï¼š**
- âœ… çœŸæ­£ç‰©ç†å…±äº«ï¼š**åªæœ‰ conda**ï¼ˆé€šè¿‡ç¡¬é“¾æ¥æŠ€æœ¯ï¼‰
- âŒ å…¶ä»–å·¥å…·ï¼ˆvenv/Poetry/uvï¼‰ï¼šé€»è¾‘éš”ç¦» + æ–‡ä»¶å†—ä½™
- è¿™æ˜¯è®¾è®¡é€‰æ‹©ï¼Œä¸æ˜¯æŠ€æœ¯è½å

**å…³äºä¾èµ–å®Œæ•´æ€§ï¼š**
- Python è§£é‡Šå‹ç‰¹æ€§å†³å®šæ— æ³• 100% ç¼–è¯‘æœŸæ£€æŸ¥
- æœ€ä½³å®è·µï¼š**é”æ–‡ä»¶ + é™æ€æ‰«æ + å…¨è¦†ç›–æµ‹è¯• + CI é˜»æ–­**
- ç›®æ ‡ï¼šæŠŠè¿è¡Œæ—¶é£é™©é™åˆ°æä½ï¼Œè€Œéå®Œå…¨æœç»

**å…³äºå·¥å…·é€‰æ‹©ï¼š**
- æ²¡æœ‰å®Œç¾å·¥å…·ï¼Œåªæœ‰é€‚åˆåœºæ™¯
- ç°ä»£è¶‹åŠ¿ï¼š`pyproject.toml` + `uv/Poetry` + Docker
- è€é¡¹ç›®ï¼š`requirements.txt` + `venv` ä¾ç„¶å¯é 

**å…³äºå·¥å…·æˆç†Ÿåº¦ï¼š**
- **Poetry**: 2018å¹´å‘å¸ƒï¼Œç”Ÿæ€æˆç†Ÿï¼Œå¤§é‡ç”Ÿäº§æ¡ˆä¾‹
- **uv**: 2023å¹´å‘å¸ƒï¼Œæ€§èƒ½å“è¶Šä½†ç›¸å¯¹å¹´è½»ï¼Œå¿«é€Ÿè¿­ä»£ä¸­
- **pip/venv**: å®˜æ–¹æ ‡å‡†ï¼Œæœ€ç¨³å®šä½†åŠŸèƒ½åŸºç¡€
- **conda**: ç§‘å­¦è®¡ç®—é¢†åŸŸäº‹å®æ ‡å‡†

---

## é™„å½•ï¼šå¿«é€Ÿå‚è€ƒ

### å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

**Poetry:**
```bash
poetry new myproject          # åˆ›å»ºæ–°é¡¹ç›®
poetry add requests           # æ·»åŠ ä¾èµ–
poetry install                # å®‰è£…æ‰€æœ‰ä¾èµ–
poetry update                 # æ›´æ–°ä¾èµ–
poetry export -f requirements.txt -o requirements.txt  # å¯¼å‡º
```

**uv:**
```bash
uv init                       # åˆå§‹åŒ–é¡¹ç›®
uv add requests               # æ·»åŠ ä¾èµ–
uv sync                       # åŒæ­¥ä¾èµ–
uv run python app.py          # è¿è¡Œè„šæœ¬
uv pip install package        # pip å…¼å®¹æ¨¡å¼
```

**conda:**
```bash
conda create -n myenv python=3.11     # åˆ›å»ºç¯å¢ƒ
conda activate myenv                   # æ¿€æ´»ç¯å¢ƒ
conda install numpy pandas             # å®‰è£…åŒ…
conda env export > environment.yml     # å¯¼å‡ºç¯å¢ƒ
```

### æ¨èèµ„æº

- **Poetry æ–‡æ¡£**: https://python-poetry.org/docs/
- **uv æ–‡æ¡£**: https://docs.astral.sh/uv/
- **Python æ‰“åŒ…æŒ‡å—**: https://packaging.python.org/
- **PEP 621** (pyproject.toml æ ‡å‡†): https://peps.python.org/pep-0621/

